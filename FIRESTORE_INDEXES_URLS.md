# 🔗 روابط Indexes Firestore المباشرة

## 📊 **روابط إنشاء Indexes:**

### **1. Offers Collection Indexes:**

#### **Index 1: status + createdDate**

```
https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=Cllwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvb2ZmZXJzL2luZGV4ZXNfXxABGgwKBnN0YXR1cxABGg0KCWNyZWF0ZWREYXRlEAIaDAoIX19uYW1lX18QAg
```

#### **Index 2: status + category**

```
https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=Cllwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvb2ZmZXJzL2luZGV4ZXNfXxABGgwKBnN0YXR1cxABGgwKB2NhdGVnb3J5EAIaDAoIX19uYW1lX18QAg
```

#### **Index 3: category + createdDate**

```
https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=Cllwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvb2ZmZXJzL2luZGV4ZXNfXxABGgwKB2NhdGVnb3J5EAEaDQoJY3JlYXRlZERhdGUQAhgB
```

### **2. Participants Collection Indexes:**

#### **Index 1: status + joinDate**

```
https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=Cllwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvcGFydGljaXBhbnRzL2luZGV4ZXNfXxABGgwKBnN0YXR1cxABGgwKB2pvaW5EYXRlEAIaDAoIX19uYW1lX18QAg
```

#### **Index 2: status + totalPoints**

```
https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=Cllwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvcGFydGljaXBhbnRzL2luZGV4ZXNfXxABGgwKBnN0YXR1cxABGg0KCXRvdGFsUG9pbnRzEAIaDAoIX19uYW1lX18QAg
```

#### **Index 3: totalPoints + joinDate**

```
https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=Cllwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvcGFydGljaXBhbnRzL2luZGV4ZXNfXxABGg0KCXRvdGFsUG9pbnRzEAEaDAoHam9pbkRhdGUQAhgB
```

### **3. Winners Collection Indexes:**

#### **Index 1: status + winDate**

```
https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=Cllwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvd2lubmVycy9pbmRleGVzX18QARoMCgZzdGF0dXMQARoMCgd3aW5EYXRlEAIaDAoIX19uYW1lX18QAg
```

#### **Index 2: drawId + status**

```
https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=Cllwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvd2lubmVycy9pbmRleGVzX18QARoLCgVkcmF3SWQQARoMCgZzdGF0dXMQAhgB
```

#### **Index 3: participantId + status**

```
https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=Cllwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvd2lubmVycy9pbmRleGVzX18QARoPCg1wYXJ0aWNpcGFudElkEAEaDAoGc3RhdHVzEAIYAQ
```

### **4. Draws Collection Indexes:**

#### **Index 1: status + startDate**

```
https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=Cllwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvZHJhd3MvaW5kZXhlc19fEAEaDAoGc3RhdHVzEAEaDQoJc3RhcnREYXRlEAIaDAoIX19uYW1lX18QAg
```

#### **Index 2: status + endDate**

```
https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=Cllwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvZHJhd3MvaW5kZXhlc19fEAEaDAoGc3RhdHVzEAEaDAoHZW5kRGF0ZRACGgwKCF9fbmFtZV9fEAE
```

#### **Index 3: startDate + endDate**

```
https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=Cllwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvZHJhd3MvaW5kZXhlc19fEAEaDQoJc3RhcnREYXRlEAEaDAoHZW5kRGF0ZRACGg0KCWNyZWF0ZWRBdBAD
```

### **5. Settings Collection Indexes:**

#### **Index 1: updatedAt**

```
https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=Cllwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvc2V0dGluZ3MvaW5kZXhlc19fEAEaDQoJdXBkYXRlZEF0EAEaDAoIX19uYW1lX18QAhgB
```

### **6. Stats Collection Indexes:**

#### **Index 1: lastUpdated**

```
https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=Cllwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvc3RhdHMvaW5kZXhlc19fEAEaDQoJbGFzdFVwZGF0ZWQQARoMCghfX25hbWVfXxACGgE
```

## 🛠️ **خطوات إنشاء Indexes:**

### **الطريقة 1: الروابط المباشرة**

1. انسخ أي رابط من الروابط أعلاه
2. اضغط عليه في المتصفح
3. سيتم فتح Firebase Console مباشرة على صفحة إنشاء الـ Index
4. اضغط "Create Index"

### **الطريقة 2: Firebase Console**

1. اذهب إلى: `https://console.firebase.google.com/project/fir-project-b3e4e/firestore/indexes`
2. اضغط "Add Index"
3. اختر Collection
4. أضف الحقول المطلوبة

### **الطريقة 3: من التطبيق**

1. افتح التطبيق: `http://localhost:8082`
2. اذهب إلى Admin Panel
3. اضغط على تبويب "اختبار Firebase"
4. اضغط "إنشاء Indexes"

## 📋 **قائمة Indexes المطلوبة:**

### **Offers Collection:**

- ✅ `status` (ascending)
- ✅ `category` (ascending)
- ✅ `createdDate` (descending)
- ✅ `status + createdDate` (composite)
- ✅ `status + category` (composite)
- ✅ `category + createdDate` (composite)

### **Participants Collection:**

- ✅ `status` (ascending)
- ✅ `joinDate` (descending)
- ✅ `totalPoints` (descending)
- ✅ `status + joinDate` (composite)
- ✅ `status + totalPoints` (composite)
- ✅ `totalPoints + joinDate` (composite)

### **Winners Collection:**

- ✅ `status` (ascending)
- ✅ `winDate` (descending)
- ✅ `drawId` (ascending)
- ✅ `participantId` (ascending)
- ✅ `status + winDate` (composite)
- ✅ `drawId + status` (composite)
- ✅ `participantId + status` (composite)

### **Draws Collection:**

- ✅ `status` (ascending)
- ✅ `startDate` (descending)
- ✅ `endDate` (descending)
- ✅ `status + startDate` (composite)
- ✅ `status + endDate` (composite)
- ✅ `startDate + endDate` (composite)

### **Settings Collection:**

- ✅ `updatedAt` (descending)

### **Stats Collection:**

- ✅ `lastUpdated` (descending)

## ⚡ **اختبار سريع:**

بعد إنشاء جميع الـ Indexes:

1. افتح التطبيق: `http://localhost:8082`
2. اذهب إلى Admin Panel
3. اضغط على تبويب "اختبار Firestore"
4. اختبر جميع العمليات (Create, Read, Update, Delete)

## 🎯 **النتيجة المتوقعة:**

بعد إنشاء جميع الـ Indexes:

- ✅ لن تظهر أخطاء في Console
- ✅ جميع العمليات ستعمل بسرعة
- ✅ الاستعلامات المعقدة ستعمل
- ✅ التطبيق سيعمل بشكل مثالي

## 📞 **إذا واجهت مشاكل:**

1. **تحقق من قواعد الأمان** - استخدم: `https://console.firebase.google.com/project/fir-project-b3e4e/firestore/rules`
2. **تحقق من Indexes** - استخدم: `https://console.firebase.google.com/project/fir-project-b3e4e/firestore/indexes`
3. **اختبر الاتصال** - استخدم مكون الاختبار في التطبيق
4. **تحقق من Console المتصفح** للأخطاء



خطأ: The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=ClBwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvb2ZmZXJzL2luZGV4ZXMvXxABGgoKBnN0YXR1cxABGg8KC2NyZWF0ZWREYXRlEAIaDAoIX19uYW1lX18QAg


خطأ: The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=ClBwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvb2ZmZXJzL2luZGV4ZXMvXxABGgwKCGNhdGVnb3J5EAEaCgoGc3RhdHVzEAEaDwoLY3JlYXRlZERhdGUQAhoMCghfX25hbWVfXxAC


خطأ: The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=ClFwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvd2lubmVycy9pbmRleGVzL18QARoKCgZzdGF0dXMQARoLCgd3aW5EYXRlEAIaDAoIX19uYW1lX18QAg


خطأ: The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=ClBwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvb2ZmZXJzL2luZGV4ZXMvXxABGgwKCGNhdGVnb3J5EAEaCgoGc3RhdHVzEAEaDwoLY3JlYXRlZERhdGUQAhoMCghfX25hbWVfXxAC

خطأ: The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=ClBwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvb2ZmZXJzL2luZGV4ZXMvXxABGgoKBnN0YXR1cxABGg8KC2NyZWF0ZWREYXRlEAIaDAoIX19uYW1lX18QAg


خطأ: The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=ClBwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvb2ZmZXJzL2luZGV4ZXMvXxABGgwKCGNhdGVnb3J5EAEaDwoLY3JlYXRlZERhdGUQAhoMCghfX25hbWVfXxAC


خطأ: The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=ClZwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvcGFydGljaXBhbnRzL2luZGV4ZXMvXxABGgoKBnN0YXR1cxABGgwKCGpvaW5EYXRlEAIaDAoIX19uYW1lX18QAg


خطأ: The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=ClZwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvcGFydGljaXBhbnRzL2luZGV4ZXMvXxABGgoKBnN0YXR1cxABGg8KC3RvdGFsUG9pbnRzEAIaDAoIX19uYW1lX18QAg


خطأ: The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=ClZwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvcGFydGljaXBhbnRzL2luZGV4ZXMvXxABGg8KC3RvdGFsUG9pbnRzEAIaDAoIam9pbkRhdGUQAhoMCghfX25hbWVfXxAC


خطأ: The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=ClFwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvd2lubmVycy9pbmRleGVzL18QARoKCgZzdGF0dXMQARoLCgd3aW5EYXRlEAIaDAoIX19uYW1lX18QAg


خطأ: The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=Ck9wcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvZHJhd3MvaW5kZXhlcy9fEAEaCgoGc3RhdHVzEAEaDQoJc3RhcnREYXRlEAIaDAoIX19uYW1lX18QAg


خطأ: The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=Ck9wcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvZHJhd3MvaW5kZXhlcy9fEAEaCgoGc3RhdHVzEAEaCwoHZW5kRGF0ZRACGgwKCF9fbmFtZV9fEAI


خطأ: The query requires an index. You can create it here: https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=Ck9wcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvZHJhd3MvaW5kZXhlcy9fEAEaDQoJc3RhcnREYXRlEAIaCwoHZW5kRGF0ZRACGgwKCF9fbmFtZV9fEAI


خطأ: The query requires an index. That index is currently building and cannot be used yet. See its status here: https://console.firebase.google.com/v1/r/project/fir-project-b3e4e/firestore/indexes?create_composite=Clpwcm9qZWN0cy9maXItcHJvamVjdC1iM2U0ZS9kYXRhYmFzZXMvKGRlZmF1bHQpL2NvbGxlY3Rpb25Hcm91cHMvZHJhd3MvaW5kZXhlcy9DSUNBZ1BpZzJZTUsQARoKCgZzdGF0dXMQARoNCglzdGFydERhdGUQAhoMCghfX25hbWVfXxAC
